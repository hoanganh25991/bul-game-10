<!doctype html>
<html lang="en" class="splash-active">
  <head>
    <meta charset="utf-8" />
    <title>Zeus RPG</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="preconnect" href="https://unpkg.com" />
    <link rel="stylesheet" href="src/style.css" />
    <meta name="theme-color" content="#0b1a2b" />
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Crect width='64' height='64' rx='12' ry='12' fill='%230b1a2b'/%3E%3Cpath d='M36 4 L12 40 h16 l-4 20 28-40 H36 Z' fill='%23ffffff'/%3E%3C/svg%3E" />
  </head>
  <body>
    <!-- Three.js renderer will append its canvas to body and sit under UI -->

    <!-- UI/HUD Overlay -->
    <div id="ui-root">
      <div id="hud">
        <div id="stats">
          <div class="bar hp">
            <div class="fill" id="hpFill"></div>
            <div class="label"><span>HP</span><span id="hpText">100/100</span></div>
          </div>
          <div class="bar mp">
            <div class="fill" id="mpFill"></div>
            <div class="label"><span>MP</span><span id="mpText">100/100</span></div>
          </div>
          <div class="bar xp">
            <div class="fill" id="xpFill"></div>
            <div class="label"><span>XP</span><span id="xpText">0/100</span></div>
          </div>
          <div id="level">Lv <span id="levelValue">1</span></div>
        </div>
      </div>

      <!-- Skill bar (Q W E R) -->
      <div id="skillbar">
        <div class="skill" data-key="Q" id="skillQ" title="Q - Chain Lightning">
          <span class="key">Q</span>
          <span class="name">Chain</span>
          <div class="cooldown" id="cdQ"></div>
        </div>
        <div class="skill" data-key="W" id="skillW" title="W - Lightning Bolt (AOE)">
          <span class="key">W</span>
          <span class="name">Bolt</span>
          <div class="cooldown" id="cdW"></div>
        </div>
        <div class="skill" data-key="E" id="skillE" title="E - Static Field (Aura)">
          <span class="key">E</span>
          <span class="name">Static</span>
          <div class="cooldown" id="cdE"></div>
        </div>
        <div class="skill" data-key="R" id="skillR" title="R - Thunderstorm (Ultimate)">
          <span class="key">R</span>
          <span class="name">Storm</span>
          <div class="cooldown" id="cdR"></div>
        </div>
      </div>

      <!-- Minimap -->
      <canvas id="minimap" width="200" height="200"></canvas>

      <!-- Hints -->
      <div id="hints" style="display:none;">
        <div>DOTA-style controls:</div>
        <div>- Left Click: select</div>
        <div>- Right Click: move / attack enemy</div>
        <div>- A: aim attack (then Left Click an enemy)</div>
        <div>- W: aim AOE (then Left Click to cast, ESC cancels)</div>
        <div>- Q/E/R: skills</div>
        <div>- S: Stop (cancel orders)</div>
        <div>- B: Recall to village (opens portal back)</div>
      </div>
    </div>

    <div id="deathMsg" class="center-msg" style="display:none;">You died. Respawning...</div>

    <!-- New Interactive UI -->
    <!-- Settings button (top-right) -->
    <button id="btnSettings" class="icon-btn top-right" aria-label="Settings" title="C√†i ƒë·∫∑t / Settings">‚öôÔ∏è</button>

    <!-- Hero screen button (top-right, next to settings) -->
    <button id="btnHeroScreen" class="icon-btn top-right" aria-label="Hero" title="Hero" style="right:64px;">üõ°Ô∏è</button>

    <!-- Camera toggle (right side) -->
    <button id="btnCamera" class="icon-btn right-center" aria-label="Camera Toggle" title="Camera">üé•</button>

    <!-- Settings Panel (now full-screen system screen) -->
    <div id="settingsPanel" class="screen hidden system-screen" role="dialog" aria-modal="true" aria-labelledby="settingsTitle">
      <div class="screen-content">
        <div class="panel-header">
          <h2 id="settingsTitle" data-i18n="settings.title">C√†i ƒë·∫∑t</h2>
          <button id="btnCloseSettings" class="icon-btn small" aria-label="Close">‚úï</button>
        </div>
        <div class="panel-content">
          <div class="row">
            <span class="row-label" data-i18n="settings.language">Ng√¥n ng·ªØ</span>
            <div class="lang-switch">
              <button class="flag" id="langVi" title="Ti·∫øng Vi·ªát" aria-label="Ti·∫øng Vi·ªát">üáªüá≥</button>
              <button class="flag" id="langEn" title="English" aria-label="English">üá∫üá∏</button>
            </div>
          </div>
          <div class="row">
            <span class="row-label" data-i18n="settings.instructions">H∆∞·ªõng d·∫´n</span>
            <div class="instructions" id="settingsInstructions"></div>
          </div>
        </div>
      </div>
    </div>


    <!-- Hero Screen -->
    <div id="heroScreen" class="screen hidden system-screen">
      <div class="screen-content hero-layout">
        <div class="hero-left">
          <div class="hero-figure">
            <!-- Decorative thunder theme -->
            <div class="thunder deco"></div>
          </div>
        </div>
        <div class="hero-right">
          <h2 data-i18n="hero.title">Zeus</h2>
          <div id="heroInfo"></div>
          <h3 data-i18n="hero.skills">K·ªπ nƒÉng</h3>
          <div id="heroSkillsList"></div>
          <button id="btnCloseHero" class="secondary" data-i18n="btn.close">ƒê√≥ng</button>
        </div>
      </div>
    </div>

    <!-- Flash overlay (visible by default to ensure coverage before JS runs) -->
    <div id="flashOverlay" class="flash" style="display: grid;">
      <div class="flash-card" role="status" aria-live="polite" aria-busy="true">
        <h2 class="flash-title">Loading Zeus RPG</h2>
        <p class="flash-desc">Preparing thunderous experience‚Ä¶</p>
        <div class="progress" aria-hidden="false">
          <div class="bar" id="flashProgressBar" style="width: 0%" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"></div>
        </div>
        <div class="flash-note" style="margin-top:10px;font-size:12px;color:rgba(10,10,10,0.5)">Loading modules‚Ä¶</div>
      </div>
    </div>

    <!-- Mobile Touch Controls -->
    <div id="mobileControls">
      <!-- Joystick (bottom-left) -->
      <div id="joystick">
        <div id="joyBase"></div>
        <div id="joyKnob"></div>
        <button id="btnCancelAim" class="small hidden" data-i18n="btn.cancel">H·ªßy</button>
      </div>
      <!-- Skill wheel (bottom-right quarter circle) -->
      <div id="skillWheel">
        <button id="btnBasic" class="skill-btn center" title="Basic">‚ö°</button>
        <button id="btnSkillQ" class="skill-btn q" title="Q">Q</button>
        <button id="btnSkillW" class="skill-btn w" title="W">W</button>
        <button id="btnSkillE" class="skill-btn e" title="E">E</button>
        <button id="btnSkillR" class="skill-btn r" title="R">R</button>
      </div>
    </div>

    <!-- Module game code -->
    <script type="importmap">
    {
      "imports": {
        "three": "https://unpkg.com/three@0.160.0/build/three.module.js"
      }
    }
    </script>
    <script type="module" src="src/main.js"></script>
  </body>
</html>
